basic:
  id: test_complex
  name: "测试附魔(复杂机制)"
  max_level: 3

rarity: 传奇
targets:
  - 剑

limitations:
  - "CONFLICT_GROUP:原版增伤附魔"

display:
  format:
    previous: "{default_previous}  {是否准备释放} §7(当前累计§e{当前累计能量}§7 - §e{当前累计百分比}%§7)"
  description:
    general: "§7击杀怪物时储存能量，右击选择是否释放使得下一次攻击伤害增加"
    specific: "§7击杀怪物时储存能量 (§a+{每只储存能量}/只§7)\n §7右击 选择是否释放使得下一次攻击伤害增加 (§a+{每点能量增伤百分比}/点%§7)"


variables:
  leveled:
    每只储存能量: level
    每点能量增伤百分比: 2*level
  modifiable:
    当前累计能量: test_complex_current_total=0
    当前累计百分比: test_complex_current_total_percent=0
    是否准备释放: ready_to_discharge=§c否

mechanisms:
  listeners:
    kill:
      type: KILL
      chains:
        - "赋值::当前累计能量:{当前累计能量}+{每只储存能量}"
        - "赋值::当前累计百分比:{当前累计百分比}+{每点能量增伤百分比}"
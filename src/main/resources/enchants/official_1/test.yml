#以下是每个附魔都应有的配置
id: test
name: "测试附魔"
max_level: 2
targets:
  - swords

rarity: epic

limitations:
  #- "PAPI_EXPRESSION:%player_level%>=30"
  #- "PERMISSION:splendidenchants.enchant.test.use"
  - "CONFLICT_GROUP:原版增伤附魔"

#TODO 创造共同默认的display设置处
display:
  #若无format，自动跟从
  format: "$default_previous &7当前(§e$当前累计}§7/§a$击杀累计}§7) $default_subsequent"
  description:
    general: "每击杀若干只怪物后，下一次攻击伤害增加"
    #若无specific，自动跟从general
    specific: "每击杀 $击杀累计 只怪物后，下一次攻击伤害增加 $伤害提升百分比%"

###以下是可选的配置
#可选，默认为true
grindstoneable: false
#可选，默认为1
weight: 0.85
#可选，默认为false
is_treasure: true
#可选，默认为false
is_cursed: true
#可选，默认为true
is_tradeable: false
#可选，默认为true
is_discoverable: true
#可选，默认跟从大配置中的默认

#TODO 创造共同默认的display设置处
variables:
  #跟等级有关的
  leveled:
    击杀累计: 3-level
    伤害提升百分比: 30*level
  #跟玩家有关的
  player_related:
    等级: %player_level%
  #跟物品数据有关的 key=初始值
  #规范：key=附魔id_变量英文翻译
  #注意小写，空格由下划线代替
  modifiable:
    当前累计: test_current_total=0

#TODO 这里是初始值，应支持int、double、String等类型

mechanisms:
  listeners:
    KILLMOB:
      - "$当前累计=$当前累计+1"
    ATTACK:
      - "$当前累计>=$击杀累计"
      - "$当前累计=0"
      - "damage=damage*(1+$伤害提升百分比/100)"